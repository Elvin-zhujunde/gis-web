import{ab as e,k as t,r as a,Z as o,a0 as l,a1 as n,a9 as i,u as s,_ as r,a8 as d,Y as c,a6 as p,q as u,B as f,c as m,aa as h,$ as v,a4 as g,a5 as y,w as F,n as _,m as b,a2 as w,F as x,a7 as k,H as B,D as S,b as C,o as D,j as A,a as $}from"../@vue/@vue.591b34be.js";import{_ as M}from"../_plugin-vue_export-helper/_plugin-vue_export-helper.1b428a4d.js";import{u as j}from"../@vueuse/@vueuse.4db90872.js";import{j as E,R as I,b as L}from"../@ant-design/@ant-design.8e5bd72a.js";import{i as z,r as T}from"../echarts/echarts.b18478ab.js";import{s as O}from"../pinia/pinia.84e91d01.js";import{u as W}from"../map/map.1cb73870.js";import"../@ctrl/@ctrl.4982d949.js";import"../zrender/zrender.331b604a.js";import"../vue-demi/vue-demi.71ba0ef2.js";import"../@amap/@amap.09f500c0.js";const H={class:"overview-structure-header"},P={class:"overview-structure-panel"},N={class:"overview-structure-corner"},R=M({__name:"PanelLeft",setup(c){e((e=>({"0d4dfb98":s(f)})));const[p,u]=j(),f=t((()=>p.value?"-400px":"0px")),m=a(!1);return(e,t)=>(o(),l("div",{class:d(["main-left-panel",{activeScreen:m.value}])},[n("div",H,[i(e.$slots,"header",{},void 0,!0)]),n("div",P,[i(e.$slots,"default",{},void 0,!0)]),n("div",N,[i(e.$slots,"corner",{},void 0,!0)]),s(p)?(o(),r(s(I),{key:1,onClick:t[1]||(t[1]=e=>s(u)()),class:"collapse-btn"})):(o(),r(s(E),{key:0,onClick:t[0]||(t[0]=e=>s(u)()),class:"collapse-btn"}))],2))}},[["__scopeId","data-v-e473fce0"]]),U={class:"main-right-panel"},K={class:"growthTrend-type-panel"},Z=M({__name:"PanelRight",setup(a){e((e=>({"397dba1b":s(p)})));const[d,c]=j(!0),p=t((()=>d.value?"-400px":"0px"));return(e,t)=>(o(),l("div",U,[n("div",K,[i(e.$slots,"default",{},void 0,!0)]),s(d)?(o(),r(s(E),{key:0,onClick:t[0]||(t[0]=e=>s(c)()),class:"collapse-btn"})):(o(),r(s(I),{key:1,onClick:t[1]||(t[1]=e=>s(c)()),class:"collapse-btn"}))]))}},[["__scopeId","data-v-ca0cde23"]]),J={class:"wrapper"},Y={class:"header"},q={class:"auto-content"},G={class:"content-wrapper"},X={class:"footer"};const Q=M({},[["render",function(e,t){return o(),l("div",J,[n("div",Y,[i(e.$slots,"header",{},void 0,!0)]),n("div",q,[n("div",G,[i(e.$slots,"default",{},void 0,!0)])]),n("div",X,[i(e.$slots,"footer",{},void 0,!0)])])}],["__scopeId","data-v-69fb6e03"]]),V={name:"ComPanel",components:{CloseOutlined:L},props:{title:{},position:{},showIcon:{type:Boolean,default:!1}},beforeDestroy(){},computed:{style:function(){let e;switch(this.position){case"lb":e={left:"20px",bottom:"84px"};break;case"lt":e={left:"20px",top:"84px"};break;case"rt":e={right:"20px",top:"84px"};break;case"rb":e={right:"20px",bottom:"84px"};break;default:e={left:0,top:0}}return e}},methods:{onClose(){this.$emit("onClose")},titleMousedown(){this.$emit("titleMousedown")}}},ee=e=>(g("data-v-6fa2c8cc"),e=e(),y(),e),te={key:0,class:"updateDetail-header"},ae={class:"title-container"},oe={class:"title"},le=ee((()=>n("div",{class:"title-under-line"},null,-1))),ne=ee((()=>n("div",{class:"under-line"},[n("div",{class:"left-line"}),n("div",{class:"right-line"})],-1))),ie={class:"updateDetail-content"};const se=M(V,[["render",function(e,t,a,s,r,d){const g=c("CloseOutlined");return o(),l("div",{ref:"updateDetailPopup",class:"updateDetail theme-updateDetail",style:v(d.style),onMousedown:t[0]||(t[0]=(...e)=>d.titleMousedown&&d.titleMousedown(...e))},[!1!==a.title?(o(),l("div",te,[n("div",ae,[n("div",oe,[n("span",null,p(a.title),1)]),n("div",null,[i(e.$slots,"head",{},void 0,!0),u(m(g,{onClick:d.onClose},null,8,["onClick"]),[[f,a.showIcon]])])]),le,ne])):h("",!0),n("div",ie,[i(e.$slots,"default",{},void 0,!0)])],36)}],["__scopeId","data-v-6fa2c8cc"]]),re=["id"],de={__name:"index",props:{id:{type:String,default:"map2Bar"},width:{type:String,default:"100%"},height:{type:String,default:"100%"},options:{type:Array,default:()=>[]},colors:{type:Array,default:()=>["#5BB1FF","#0064BE","#002F99","#04005E","#7800FF","#49007B","#9B4CBB","#008386","#00F8FF","#003D1E","#007543","#00D579","#62FCB9","#4C6700","#99D100","#D7FF6B","#A09000","#FDEA41","#FFF7B4","#C7550B","#FF7745","#F98A44","#FF987D","#EE5858","#BD1414"]},itemBorderWidth:{type:Number,default:2},showTitle:{type:Boolean,default:!1},titleObj:{type:Object,default:()=>{}},titleText:{type:String,default:""},total:{type:Number,default:0}},setup(e){function t(e){return e.toString().replace(/\d+/,(function(e){return e.replace(/(\d)(?=(\d{3})+$)/g,(function(e){return`${e},`}))}))}const a=e;return F((()=>a.options),((e,o)=>{_((()=>{!function(){let e=a.options,o=z(document.getElementById(a.id));o.setOption({tooltip:{trigger:"item",confine:!0,padding:5,formatter:e=>`<div style='display:flex;align-items:center;font-size:12px;}'><i style='width:7px;height:7px;border-radius:50%;margin-right:7px;background:${e.color}'></i><span>${e.name}</span>：<span>${e.value?e.value.toLocaleString():0}</span>,&nbsp;<span>${e.percent?e.percent.toLocaleString():0}%</span></div>\n            \n                    `},title:{show:a.showTitle,text:`{a|${a.titleText}}`,left:"41.5%",top:"38.5%",textStyle:{rich:{a:{fontSize:12,color:"#ccc",fontFamily:"DINAlternate-Bold, DINAlternate",fontWeight:"bold",align:"center"}}},...a.titleObj},legend:{pageTextStyle:{fontSize:12,color:"rgba(255,255,255)"},top:"90%",width:"100%",icon:"circle",itemWidth:8,itemHeight:8,itemGap:10,textStyle:{color:"#FFFFFF",fontWeight:"400",rich:{a:{width:80,fontFamily:"AlibabaPuHuiTi-Regular",fontSize:12,color:"#9AA9CA"},c:{width:50,color:"#FFFFFF",align:"left",fontSize:12,fontFamily:"DIN-BlackItalic"}}},formatter:a=>{let o;for(let l=0,n=e.length;l<n;l++){if(e[l].name==a&&t(e[l].value),!a)return"";o=a.length>6?`${a.slice(0,6)}...`:a}return`{a|${o}}`},tooltip:{trigger:"item",formatter(t){let a=e.find((e=>e.name===t.name));return`${null==a?void 0:a.name}:${null==a?void 0:a.value}`},textStyle:{fontSize:12},show:!0}},color:a.colors,series:[{type:"custom",coordinateSystem:"none",renderItem:(e,t)=>({type:"circle",shape:{cx:t.getWidth()/2,cy:t.getHeight()/2.38,r:Math.min(t.getWidth(),t.getHeight())/2*.745},style:{stroke:"#4F5971",fill:"transparent",lineWidth:1.5,lineDash:[4,4]},silent:!0}),data:[0]},{type:"custom",coordinateSystem:"none",renderItem:(e,t)=>({type:"circle",shape:{cx:t.getWidth()/2,cy:t.getHeight()/2.38,r:Math.min(t.getWidth(),t.getHeight())/2*.33},style:{stroke:"#4F5971",fill:"transparent",lineWidth:3},silent:!0}),data:[0]},{type:"pie",radius:["36%","72%"],center:["50%","42%"],avoidLabelOverlap:!1,minAngle:10,itemStyle:{borderWidth:a.itemBorderWidth,borderColor:"rgba(9, 47, 87, 0.73)"},label:{show:!1,position:"center"},emphasis:{label:{show:!a.showTitle,fontSize:15,color:"#FFFFFF",formatter:"{d}%"}},labelLine:{show:!1},data:a.options}]},!0),window.addEventListener("resize",(function(){o.resize()}))}()}))}),{immediate:!0}),(t,a)=>(o(),l("div",{class:"analysisPie",id:e.id,style:v({height:e.height,width:e.width})},null,12,re))}},ce=["id"],pe={__name:"map2Bar",props:{id:{type:String,default:"bar1"},width:{type:String,default:"100%"},height:{type:String,default:"100%"},dataSource:{type:Array,default:()=>[]},colors:{type:Array,default:()=>["#5BB1FF","#0064BE","#002F99","#04005E","#7800FF","#49007B","#9B4CBB","#008386","#00F8FF","#003D1E","#007543","#00D579","#62FCB9","#4C6700","#99D100","#D7FF6B","#A09000","#FDEA41","#FFF7B4","#C7550B","#FF7745","#F98A44","#FF987D","#EE5858","#BD1414"]},showTitle:{type:Boolean,default:!1}},setup(e){let t;const a=e;return F((()=>a.dataSource),((e,o)=>{_((()=>{!function(){let e=a.dataSource;t=z(document.getElementById(a.id)),t.showLoading(),t.hideLoading(),T("USA",e,{Alaska:{left:-131,top:25,width:15},Hawaii:{left:-110,top:28,width:5},"Puerto Rico":{left:-76,top:26,width:2}});var o=e.features.map((e=>({name:e.properties.name,value:_tool.getRandomInt(1e3,1e5)})));o.sort((function(e,t){return e.value-t.value}));const l={visualMap:{left:"right",min:1e3,max:1e5,inRange:{color:["#313695","#4575b4","#74add1","#abd9e9","#e0f3f8","#ffffbf","#fee090","#fdae61","#f46d43","#d73027","#a50026"]},text:["High","Low"],calculable:!0},series:[{id:"population",type:"map",roam:!0,map:"USA",animationDurationUpdate:1e3,universalTransition:!0,data:o}]},n={grid:{left:"20%"},xAxis:{type:"value"},yAxis:{type:"category",axisLabel:{rotate:30},data:o.map((function(e){return e.name}))},animationDurationUpdate:1e3,series:{type:"bar",id:"population",data:o.map((function(e){return e.value})),universalTransition:!0}};let i=l;t.setOption(l),t.on("click",(function(e){i=i===l?n:l,t.setOption(i,!0)})),window.addEventListener("resize",(function(){t.resize()}))}()}))}),{immediate:!0}),b((()=>{})),(t,a)=>(o(),l("div",{class:"bar1",id:e.id,style:v({height:e.height,width:e.width})},null,12,ce))}},ue={key:0},fe={key:1},me={__name:"CascadeRegion",setup(e){const t=W(),{cascader_vmodel:a}=O(t);function i(e,t,a){}return F(a,(async e=>{if(!e)return void(t.cascaer_geo_data=null);let a=e[e.length-1];t.current_cascader={level:e.length,adcode:a}})),F((()=>t.current_cascader),(async({adcode:e,level:a})=>{t.cascaer_geo_data=await fetch(`http://121.36.68.180:4000/geojson/${e}.json`,{}).then((e=>e.json()))})),(e,d)=>{const u=c("a-cascader");return o(),r(u,{value:s(a),"onUpdate:value":d[0]||(d[0]=e=>C(a)?a.value=e:null),options:s(t).cascader_option_source,style:{width:"100%"},onChange:i,"expand-trigger":"hover","field-names":{value:"code"},getPopupContainer:e=>e.parentNode,"change-on-select":"",placeholder:"请输入区划"},{displayRender:w((({labels:e,selectedOptions:t})=>[(o(!0),l(x,null,k(e,((a,i)=>(o(),l("span",{key:t[i].value},[i===e.length-1?(o(),l("span",ue,[B(p(a)+" ( ",1),n("a",{onClick:S((()=>{}),["stop"])},p(t[i].code),1),B(" ) ")])):(o(),l("span",fe,p(a)+" /",1))])))),128))])),_:1},8,["value","options","getPopupContainer"])}}},he={key:0,style:{color:"#1890ff"}},ve={__name:"LayerTree",setup(e){const t=W(),{layerTreeData:a,checkedLayerList:n}=O(t);return F(n,(e=>{})),(e,t)=>{const i=c("a-tree");return o(),r(i,{checkedKeys:s(n),"onUpdate:checkedKeys":t[0]||(t[0]=e=>C(n)?n.value=e:null),checkable:"","tree-data":s(a)},{title:w((({title:e,key:t})=>["0-0"===t?(o(),l("span",he,p(e),1)):(o(),l(x,{key:1},[B(p(e),1)],64))])),_:1},8,["checkedKeys","tree-data"])}}},ge={class:"map-control"},ye={key:1},Fe=M({__name:"MapControl",setup(e){let n=a(""),i=a(""),d=W();function u(){d.setMapMode("2d"===d.mapMode?"3d":"2d"),d.mapLoadStatus=!1}D((()=>{"2d"===d.mapMode&&(n.value=map.getCenter().toJSON(),i.value=map.getZoom(),map.on("zoomend",(function(){i.value=map.getZoom()})),map.on("moveend",(function(){n.value=map.getCenter().toJSON()})))})),A((()=>{d.mapMode}));let f=t((()=>"2d"===d.mapMode?[{title:"地图模式",value:d.mapMode},{title:"地图中心",value:n.value||""},{title:"地图级别",value:i.value||""}]:[{title:"地图模式",value:d.mapMode}]));return(e,t)=>{const a=c("a-button"),n=c("a-descriptions-item"),i=c("a-descriptions");return o(),l("ul",ge,[m(i,{title:""},{default:w((()=>[(o(!0),l(x,null,k(s(f),(e=>(o(),r(n,{span:3,labelStyle:{width:"80px",color:"#fff"},contentStyle:{color:"#fff"},label:e.title,key:e.title},{default:w((()=>["地图模式"===e.title?(o(),r(a,{key:0,ghost:"",size:"small",onClick:u},{default:w((()=>[B(p(e.value),1)])),_:2},1024)):(o(),l("span",ye,p(e.value),1))])),_:2},1032,["label"])))),128))])),_:1})])}}},[["__scopeId","data-v-f707688c"]]),_e=M({__name:"OverviewIndex",setup(e){const a=W(),n=$({options:t((()=>{const e=["人口","房屋","企业","设施","地址","事件"];if(a.current_cascader){const{level:t=1}=a.current_cascader;return e.map((e=>({name:e,value:Math.floor(1e5*Math.random()/t+1e4)})))}return e.map((e=>({name:e,value:Math.floor(1e5*Math.random()+1e4)})))})),colors:["#F09E43","#51ffef","#2443BF","#BF4773","#4AA2FF","#C6DE63","#5BB1FF"]});return F((()=>a.current_cascader),(()=>{})),(e,t)=>{const i=c("a-empty");return o(),l(x,null,[m(R,null,{default:w((()=>[m(Q,null,{header:w((()=>[m(se,{title:"行政区划"},{default:w((()=>[m(s(me))])),_:1})])),default:w((()=>[m(se,{title:"图层"},{default:w((()=>[m(ve)])),_:1})])),footer:w((()=>[m(se,{title:"地图控制"},{default:w((()=>[s(a).mapLoadStatus?(o(),r(Fe,{key:0})):h("",!0)])),_:1})])),_:1})])),_:1}),m(Z,null,{default:w((()=>[m(Q,null,{header:w((()=>[m(se,{style:{height:"200px"},title:"number"})])),default:w((()=>[m(se,{style:{height:"300px"},title:"一标四实"},{default:w((()=>[m(de,{id:"pie_type",options:s(n).options,colors:s(n).colors,itemBorderWidth:0,showTitle:!0,total:s(n).total,titleText:"一标四实"},null,8,["options","colors","total"])])),_:1}),m(se,{style:{height:"350px"},title:"统计(可点击)"},{default:w((()=>[null!=s(a).cascaer_geo_data?(o(),r(pe,{key:0,dataSource:s(a).cascaer_geo_data},null,8,["dataSource"])):(o(),r(i,{key:1,style:{"margin-top":"20%"}}))])),_:1})])),_:1})])),_:1})],64)}}},[["__scopeId","data-v-4ff6f075"]]);export{_e as default};
