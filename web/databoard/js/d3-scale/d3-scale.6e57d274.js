import{m as n}from"../d3-collection/d3-collection.24c9e70d.js";import{b as t,t as r,a as e,c as u,d as a,e as i,f as o}from"../d3-array/d3-array.375ae530.js";import{f as c,p as f,a as l,b as s,c as h,d as p}from"../d3-format/d3-format.556ed624.js";import{t as g}from"../d3-time-format/d3-time-format.fb31d540.js";import{u as m,a as v,t as M,b as d,c as y,s as w,d as k,e as N}from"../d3-time/d3-time.77eb7812.js";import{i as b,a as x,b as j}from"../d3-interpolate/d3-interpolate.152deb5d.js";function D(n,t){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(t).domain(n)}return this}function A(n,t){switch(arguments.length){case 0:break;case 1:this.interpolator(n);break;default:this.interpolator(t).domain(n)}return this}var E=Array.prototype,q=E.map,F=E.slice,I={name:"implicit"};function O(){var t=n(),r=[],e=[],u=I;function a(n){var a=n+"",i=t.get(a);if(!i){if(u!==I)return u;t.set(a,i=r.push(n))}return e[(i-1)%e.length]}return a.domain=function(e){if(!arguments.length)return r.slice();r=[],t=n();for(var u,i,o=-1,c=e.length;++o<c;)t.has(i=(u=e[o])+"")||t.set(i,r.push(u));return a},a.range=function(n){return arguments.length?(e=F.call(n),a):e.slice()},a.unknown=function(n){return arguments.length?(u=n,a):u},a.copy=function(){return O(r,e).unknown(u)},D.apply(a,arguments),a}function Y(n){return+n}var B=[0,1];function L(n){return n}function R(n,t){return(t-=n=+n)?function(r){return(r-n)/t}:(r=isNaN(t)?NaN:.5,function(){return r});var r}function S(n){var t,r=n[0],e=n[n.length-1];return r>e&&(t=r,r=e,e=t),function(n){return Math.max(r,Math.min(e,n))}}function V(n,t,r){var e=n[0],u=n[1],a=t[0],i=t[1];return u<e?(e=R(u,e),a=r(i,a)):(e=R(e,u),a=r(a,i)),function(n){return a(e(n))}}function W(n,r,e){var u=Math.min(n.length,r.length)-1,a=new Array(u),i=new Array(u),o=-1;for(n[u]<n[0]&&(n=n.slice().reverse(),r=r.slice().reverse());++o<u;)a[o]=R(n[o],n[o+1]),i[o]=e(r[o],r[o+1]);return function(r){var e=t(n,r,1,u)-1;return i[e](a[e](r))}}function Z(n,t){return t.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function z(){var n,t,r,e,u,a,i=B,o=B,c=x,f=L;function l(){return e=Math.min(i.length,o.length)>2?W:V,u=a=null,s}function s(t){return isNaN(t=+t)?r:(u||(u=e(i.map(n),o,c)))(n(f(t)))}return s.invert=function(r){return f(t((a||(a=e(o,i.map(n),b)))(r)))},s.domain=function(n){return arguments.length?(i=q.call(n,Y),f===L||(f=S(i)),l()):i.slice()},s.range=function(n){return arguments.length?(o=F.call(n),l()):o.slice()},s.rangeRound=function(n){return o=F.call(n),c=j,l()},s.clamp=function(n){return arguments.length?(f=n?S(i):L,s):f!==L},s.interpolate=function(n){return arguments.length?(c=n,l()):c},s.unknown=function(n){return arguments.length?(r=n,s):r},function(r,e){return n=r,t=e,l()}}function C(n,t){return z()(n,t)}function G(n){var t=n.domain;return n.ticks=function(n){var r=t();return e(r[0],r[r.length-1],null==n?10:n)},n.tickFormat=function(n,e){var u=t();return function(n,t,e,u){var a,i=r(n,t,e);switch((u=c(null==u?",f":u)).type){case"s":var o=Math.max(Math.abs(n),Math.abs(t));return null!=u.precision||isNaN(a=s(i,o))||(u.precision=a),h(u,o);case"":case"e":case"g":case"p":case"r":null!=u.precision||isNaN(a=l(i,Math.max(Math.abs(n),Math.abs(t))))||(u.precision=a-("e"===u.type));break;case"f":case"%":null!=u.precision||isNaN(a=f(i))||(u.precision=a-2*("%"===u.type))}return p(u)}(u[0],u[u.length-1],null==n?10:n,e)},n.nice=function(r){null==r&&(r=10);var e,a=t(),i=0,o=a.length-1,c=a[i],f=a[o];return f<c&&(e=c,c=f,f=e,e=i,i=o,o=e),(e=u(c,f,r))>0?(c=Math.floor(c/e)*e,f=Math.ceil(f/e)*e,e=u(c,f,r)):e<0&&(c=Math.ceil(c*e)/e,f=Math.floor(f*e)/e,e=u(c,f,r)),e>0?(a[i]=Math.floor(c/e)*e,a[o]=Math.ceil(f/e)*e,t(a)):e<0&&(a[i]=Math.ceil(c*e)/e,a[o]=Math.floor(f*e)/e,t(a)),n},n}function H(){var n=C(L,L);return n.copy=function(){return Z(n,H())},D.apply(n,arguments),G(n)}function J(n,t){var r,e=0,u=(n=n.slice()).length-1,a=n[e],i=n[u];return i<a&&(r=e,e=u,u=r,r=a,a=i,i=r),n[e]=t.floor(a),n[u]=t.ceil(i),n}function K(n){return Math.log(n)}function P(n){return Math.exp(n)}function Q(n){return-Math.log(-n)}function T(n){return-Math.exp(-n)}function U(n){return isFinite(n)?+("1e"+n):n<0?0:n}function X(n){return function(t){return-n(-t)}}function $(n){var t,r,u=n(K,P),a=u.domain,i=10;function o(){return t=function(n){return n===Math.E?Math.log:10===n&&Math.log10||2===n&&Math.log2||(n=Math.log(n),function(t){return Math.log(t)/n})}(i),r=function(n){return 10===n?U:n===Math.E?Math.exp:function(t){return Math.pow(n,t)}}(i),a()[0]<0?(t=X(t),r=X(r),n(Q,T)):n(K,P),u}return u.base=function(n){return arguments.length?(i=+n,o()):i},u.domain=function(n){return arguments.length?(a(n),o()):a()},u.ticks=function(n){var u,o=a(),c=o[0],f=o[o.length-1];(u=f<c)&&(p=c,c=f,f=p);var l,s,h,p=t(c),g=t(f),m=null==n?10:+n,v=[];if(!(i%1)&&g-p<m){if(p=Math.round(p)-1,g=Math.round(g)+1,c>0){for(;p<g;++p)for(s=1,l=r(p);s<i;++s)if(!((h=l*s)<c)){if(h>f)break;v.push(h)}}else for(;p<g;++p)for(s=i-1,l=r(p);s>=1;--s)if(!((h=l*s)<c)){if(h>f)break;v.push(h)}}else v=e(p,g,Math.min(g-p,m)).map(r);return u?v.reverse():v},u.tickFormat=function(n,e){if(null==e&&(e=10===i?".0e":","),"function"!=typeof e&&(e=p(e)),Infinity===n)return e;null==n&&(n=10);var a=Math.max(1,i*n/u.ticks().length);return function(n){var u=n/r(Math.round(t(n)));return u*i<i-.5&&(u*=i),u<=a?e(n):""}},u.nice=function(){return a(J(a(),{floor:function(n){return r(Math.floor(t(n)))},ceil:function(n){return r(Math.ceil(t(n)))}}))},u}function _(){var n=$(z()).domain([1,10]);return n.copy=function(){return Z(n,_()).base(n.base())},D.apply(n,arguments),n}function nn(n){return function(t){return t<0?-Math.pow(-t,n):Math.pow(t,n)}}function tn(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function rn(n){return n<0?-n*n:n*n}function en(n){var t=n(L,L),r=1;return t.exponent=function(t){return arguments.length?1===(r=+t)?n(L,L):.5===r?n(tn,rn):n(nn(r),nn(1/r)):r},G(t)}function un(){var n=en(z());return n.copy=function(){return Z(n,un()).exponent(n.exponent())},D.apply(n,arguments),n}function an(){var n,r=[],e=[],u=[];function o(){var n=0,t=Math.max(1,e.length);for(u=new Array(t-1);++n<t;)u[n-1]=i(r,n/t);return c}function c(r){return isNaN(r=+r)?n:e[t(u,r)]}return c.invertExtent=function(n){var t=e.indexOf(n);return t<0?[NaN,NaN]:[t>0?u[t-1]:r[0],t<u.length?u[t]:r[r.length-1]]},c.domain=function(n){if(!arguments.length)return r.slice();r=[];for(var t,e=0,u=n.length;e<u;++e)null==(t=n[e])||isNaN(t=+t)||r.push(t);return r.sort(a),o()},c.range=function(n){return arguments.length?(e=F.call(n),o()):e.slice()},c.unknown=function(t){return arguments.length?(n=t,c):n},c.quantiles=function(){return u.slice()},c.copy=function(){return an().domain(r).range(e).unknown(n)},D.apply(c,arguments)}function on(){var n,r=0,e=1,u=1,a=[.5],i=[0,1];function o(r){return r<=r?i[t(a,r,0,u)]:n}function c(){var n=-1;for(a=new Array(u);++n<u;)a[n]=((n+1)*e-(n-u)*r)/(u+1);return o}return o.domain=function(n){return arguments.length?(r=+n[0],e=+n[1],c()):[r,e]},o.range=function(n){return arguments.length?(u=(i=F.call(n)).length-1,c()):i.slice()},o.invertExtent=function(n){var t=i.indexOf(n);return t<0?[NaN,NaN]:t<1?[r,a[0]]:t>=u?[a[u-1],e]:[a[t-1],a[t]]},o.unknown=function(t){return arguments.length?(n=t,o):o},o.thresholds=function(){return a.slice()},o.copy=function(){return on().domain([r,e]).range(i).unknown(n)},D.apply(G(o),arguments)}function cn(){var n,r=[.5],e=[0,1],u=1;function a(a){return a<=a?e[t(r,a,0,u)]:n}return a.domain=function(n){return arguments.length?(r=F.call(n),u=Math.min(r.length,e.length-1),a):r.slice()},a.range=function(n){return arguments.length?(e=F.call(n),u=Math.min(r.length,e.length-1),a):e.slice()},a.invertExtent=function(n){var t=e.indexOf(n);return[r[t-1],r[t]]},a.unknown=function(t){return arguments.length?(n=t,a):n},a.copy=function(){return cn().domain(r).range(e).unknown(n)},D.apply(a,arguments)}var fn=1e3,ln=60*fn,sn=60*ln,hn=24*sn,pn=7*hn,gn=30*hn,mn=365*hn;function vn(n){return new Date(n)}function Mn(n){return n instanceof Date?+n:+new Date(+n)}function dn(n,t,e,u,a,i,c,f,l){var s=C(L,L),h=s.invert,p=s.domain,g=l(".%L"),m=l(":%S"),v=l("%I:%M"),M=l("%I %p"),d=l("%a %d"),y=l("%b %d"),w=l("%B"),k=l("%Y"),N=[[c,1,fn],[c,5,5*fn],[c,15,15*fn],[c,30,30*fn],[i,1,ln],[i,5,5*ln],[i,15,15*ln],[i,30,30*ln],[a,1,sn],[a,3,3*sn],[a,6,6*sn],[a,12,12*sn],[u,1,hn],[u,2,2*hn],[e,1,pn],[t,1,gn],[t,3,3*gn],[n,1,mn]];function b(r){return(c(r)<r?g:i(r)<r?m:a(r)<r?v:u(r)<r?M:t(r)<r?e(r)<r?d:y:n(r)<r?w:k)(r)}function x(t,e,u,a){if(null==t&&(t=10),"number"==typeof t){var i=Math.abs(u-e)/t,c=o((function(n){return n[2]})).right(N,i);c===N.length?(a=r(e/mn,u/mn,t),t=n):c?(a=(c=N[i/N[c-1][2]<N[c][2]/i?c-1:c])[1],t=c[0]):(a=Math.max(r(e,u,t),1),t=f)}return null==a?t:t.every(a)}return s.invert=function(n){return new Date(h(n))},s.domain=function(n){return arguments.length?p(q.call(n,Mn)):p().map(vn)},s.ticks=function(n,t){var r,e=p(),u=e[0],a=e[e.length-1],i=a<u;return i&&(r=u,u=a,a=r),r=(r=x(n,u,a,t))?r.range(u,a+1):[],i?r.reverse():r},s.tickFormat=function(n,t){return null==t?b:l(t)},s.nice=function(n,t){var r=p();return(n=x(n,r[0],r[r.length-1],t))?p(J(r,n)):s},s.copy=function(){return Z(s,dn(n,t,e,u,a,i,c,f,l))},s}function yn(){return D.apply(dn(N,k,w,y,d,M,v,m,g).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function wn(n,t){return t.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function kn(){var n=G(function(){var n,t,r,e,u,a=0,i=1,o=L,c=!1;function f(t){return isNaN(t=+t)?u:o(0===r?.5:(t=(e(t)-n)*r,c?Math.max(0,Math.min(1,t)):t))}return f.domain=function(u){return arguments.length?(n=e(a=+u[0]),t=e(i=+u[1]),r=n===t?0:1/(t-n),f):[a,i]},f.clamp=function(n){return arguments.length?(c=!!n,f):c},f.interpolator=function(n){return arguments.length?(o=n,f):o},f.unknown=function(n){return arguments.length?(u=n,f):u},function(u){return e=u,n=u(a),t=u(i),r=n===t?0:1/(t-n),f}}()(L));return n.copy=function(){return wn(n,kn())},A.apply(n,arguments)}function Nn(){var n=G(function(){var n,t,r,e,u,a,i,o=0,c=.5,f=1,l=L,s=!1;function h(n){return isNaN(n=+n)?i:(n=.5+((n=+a(n))-t)*(n<t?e:u),l(s?Math.max(0,Math.min(1,n)):n))}return h.domain=function(i){return arguments.length?(n=a(o=+i[0]),t=a(c=+i[1]),r=a(f=+i[2]),e=n===t?0:.5/(t-n),u=t===r?0:.5/(r-t),h):[o,c,f]},h.clamp=function(n){return arguments.length?(s=!!n,h):s},h.interpolator=function(n){return arguments.length?(l=n,h):l},h.unknown=function(n){return arguments.length?(i=n,h):i},function(i){return a=i,n=i(o),t=i(c),r=i(f),e=n===t?0:.5/(t-n),u=t===r?0:.5/(r-t),h}}()(L));return n.copy=function(){return wn(n,Nn())},A.apply(n,arguments)}export{_ as a,on as b,cn as c,Nn as d,H as l,O as o,un as p,an as q,kn as s,yn as t};
